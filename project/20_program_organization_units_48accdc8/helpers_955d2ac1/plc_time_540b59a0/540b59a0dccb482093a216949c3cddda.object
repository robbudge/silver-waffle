{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)540b59a0-dccb-4820-93a2-16949c3cddda","ParentGuid":"(Guid)00000000-0000-0000-0000-000000000000","Name":"(string)PLC_TIME","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)21af5390-2942-461a-bf89-951aaf6999f1","@Value":"(Guid)955d2ac1-8e8c-471f-9cf8-bdb769e5327e"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)(*****************)\n(* Read PLC Time *)\n(*****************)\n\n(* IN/OUT - Function operation diagnostic (0 if OK) *)\n(* Result = Controller RTC as a UTC Timestamp value (number of seconds since January 1st, 1970 00:00:00) *)\nq_dwEpochTime := SysTimeRtcGet(pResult := q_udiSysTimeRtcGetDiag);\nq_dwEpochTime := DINT_TO_DWORD(DWORD_TO_DINT(q_dwEpochTime)+i_diMinuntesOffset*60);\t\n\n(* IN     - UTC Timestamp value (number of seconds since January 1st, 1970 00:00:00) *)\n(* IN/OUT - Date & Time in a SYSTEMDATE structure *)\n(* Result = Function operation diagnostic (OK if 0) *)\nq_udiConvertUtcToDateDiag := SysTimeRtcConvertUtcToDate(dwTimestampUtc := q_dwEpochTime,  pDate:= v_PLCDate);\n\n\n(* Date & Time elements of the SYSTEMDATE structure *)\n(* Examples of access to any SYSTIMEDATE data: v_PLCDate => v_PLCDate.wXXXXX *)\nq_uiYear        := v_PLCDate.wYear;\nq_uiMonth       := v_PLCDate.wMonth;\nq_uiDay         := v_PLCDate.wDay;\nq_uiHour        := v_PLCDate.wHour;\nq_uiMinutes     := v_PLCDate.wMinute;\nq_uiSeconds     := v_PLCDate.wSecond;\nq_uiDayOfWeek   := v_PLCDate.wDayOfWeek;\nq_uiDayOfYear   := v_PLCDate.wYday;\n\n(*******************)\n(* Change PLC Time *)\n(*******************)\n\n(* Date & Time elements for a SYSTEMDATE structure *)\n(* NOTE: The \"Day of Week\" and \"Day of Year\" elements are not useful here. *)\n(* Examples of access to any SYSTIMEDATE data: v_NewPLCDate => v_NewPLCDate.wXXXXX *)\nv_NewPLCDate.wYear         := i_uiYear;\nv_NewPLCDate.wMonth        := i_uiMonth;\nv_NewPLCDate.wDay          := i_uiDay;\nv_NewPLCDate.wHour         := i_uiHour;\nv_NewPLCDate.wMinute       := i_uiMinutes;\nv_NewPLCDate.wSecond       := i_uiSeconds;\nv_NewPLCDate.wMilliseconds := 0;\n\n(* IN/OUT - Date & Time as a SYSTEMDATE structure *)\n(* IN/OUT - New Date: Timestamp calculated from entered Date & Time value *)\n(*           =  number of seconds since January 1st, 1970 00:00:00        *)\n(*              or FFFF FFFF hex in case of unsuccessful conversion.      *)\n(* Result = Function operation diagnostic (OK if 0) *)\nq_udiConvertDateToUtcDiag := SysTimeRtcConvertDateToUtc(pDate:= v_NewPLCDate, pdwTimestampUtc := v_dwNewControllerRtcAsUtc);\nv_dwNewControllerRtcAsUtc :=DINT_TO_DWORD(DWORD_TO_DINT(v_dwNewControllerRtcAsUtc)-i_diMinuntesOffset*60);\n\n(* Command for updating the controller's date & time:            *)\n(* Only if they are valid AND if in presence of the user command *)\nv_xSetValidDateTime := (v_dwNewControllerRtcAsUtc <> 16#FFFFFFFF) AND i_xCmdSetDateTime;\n\nIF v_xSetValidDateTime THEN\n    (* IN     - Timestamp of the New Date (number of seconds since January 1st, 1970 00:00:00) *)\n    (* Result = Function operation diagnostic (OK if 0) *)\n    q_udiSysTimeRtcSetDiag := SysTimeRtcSet(ulTimestamp := v_dwNewControllerRtcAsUtc);\nEND_IF\ni_xCmdSetDateTime:=FALSE;\n\n","LineInfoPersistence":"(string)540b59a0-dccb-4820-93a2-16949c3cddda_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string){attribute 'hide_all_locals’}\nPROGRAM PLC_TIME\nVAR_INPUT\n(* Change PLC Time *)\n    (* User command for updating the controller's date & time *)\n    i_xCmdSetDateTime           : BOOL  := FALSE;\n    (* New Date: Date & Time elements for a SYSTEMDATE structure *)\n    i_uiYear                    : UINT  := 2011; \n    i_uiMonth                   : UINT  :=    1; (* Mounths 1 to 12 *)\n    i_uiDay                     : UINT  :=    1; (* Days 1 to 31 *)\n    i_uiHour                    : UINT  :=   11; (* Hours 0 to 23 *)\n    i_uiMinutes                 : UINT  :=   55; (* Minutes 0 to 59 *)\n    i_uiSeconds                 : UINT  :=    0; (* Seconds 0 to 59 *)\n\ti_diMinuntesOffset\t\t\t: DINT\t:= 0; //Time Offset from UTC\t\nEND_VAR\nVAR_OUTPUT\n\tq_uiYear                    : UINT  := 0;\n    q_uiMonth                   : UINT  := 0;\n    q_uiDay                     : UINT  := 0;\n    q_uiHour                    : UINT  := 0;\n    q_uiMinutes                 : UINT  := 0;\n    q_uiSeconds                 : UINT  := 0;\n    q_uiDayOfWeek               : UINT  := 0;\n    q_uiDayOfYear               : UINT  := 0;\n\tq_dwEpochTime\t\t\t\t: DWORD;\t\nEND_VAR\n\nVAR\n\t(* Read PLC Time *)\n    (* Result: Controller RTC as a UTC Timestamp value      *)\n    (* (number of seconds since January 1st, 1970 00:00:00) *)\n\t{attribute 'symbol' := 'none'}\n    v_dwControllerRtcAsUtc      : DWORD := 0;\n    (* Result: Date & Time in a SYSTEMDATE structure *)\n\t{attribute 'symbol' := 'none'}\n    v_PLCDate                   : SYSTIMEDATE;\n    (* Result: Date & Time elements of the SYSTEMDATE structure *)\n\t    (* Function operation diagnostic of the \"SysTimeRtcGet\" function: OK if 0 *)\n\t{attribute 'symbol' := 'none'}\n    q_udiSysTimeRtcGetDiag      : UDINT := 0;\n    (* Function operation diagnostic of the \"SysTimeRtcConvertUtcToDate\" function: OK if 0 *)\n\t{attribute 'symbol' := 'none'}\n    q_udiConvertUtcToDateDiag   : UDINT := 0;\n(* Change PLC Time *)\n    (* New Date: Date & Time as a SYSTEMDATE structure *)\n\t{attribute 'symbol' := 'none'}\n    v_NewPLCDate                : SYSTIMEDATE;\n    (* New Date: Timestamp calculated from entered Date & Time value *)\n    (*  = number of seconds since January 1st, 1970 00:00:00         *)\n    (*    or FFFF FFFF hex in case of unsuccessful conversion.       *)\n\t{attribute 'symbol' := 'none'}\n    v_dwNewControllerRtcAsUtc   : DWORD := 0;\n    (* Command for updating the controller's date & time: Only if they are valid *)\n\t{attribute 'symbol' := 'none'}\n    v_xSetValidDateTime         : BOOL  := FALSE;\n    (* Function operation diagnostic of the \"SysTimeRtcConvertDateToUtc\" function: OK if 0 *)\n\t{attribute 'symbol' := 'none'}\n    q_udiConvertDateToUtcDiag   : UDINT := 0;\n    (* Function operation diagnostic of the \"SysTimeRtcSet\" function: OK if 0 *)\n\t{attribute 'symbol' := 'none'}\n    q_udiSysTimeRtcSetDiag      : UDINT := 0;\n\ti_diMinuntesOffset_test: DINT;\nEND_VAR\n","LineInfoPersistence":"(string)540b59a0-dccb-4820-93a2-16949c3cddda_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)217","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}